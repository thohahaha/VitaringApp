<app-dynamic-background></app-dynamic-background>

<ion-content [fullscreen]="true" class="login-content">
  <div class="login-container">
    <div class="login-wrapper">
      <!-- Header Section -->
      <div class="header-section">
        <div class="logo-container">
          <div class="logo-circle">
            <ion-icon name="fitness-outline"></ion-icon>
          </div>
          <h1 class="app-title">VitaRing</h1>
        </div>
        <div class="welcome-text">
          <h2 class="welcome-title">Selamat Datang Kembali!</h2>
          <p class="welcome-subtitle">Masuk ke akun Anda untuk melanjutkan</p>
        </div>
      </div>

      <!-- Login Card -->
      <div class="login-card neu-card-raised">
        <form (ngSubmit)="login()" class="login-form">
          
          <!-- Input Fields -->
          <div class="input-section">
            <div class="input-group">
              <label class="input-label">Email</label>
              <div class="input-wrapper neu-inset">
                <ion-icon name="mail-outline" class="input-icon"></ion-icon>
                <input 
                  type="email" 
                  [(ngModel)]="email" 
                  name="email" 
                  placeholder="Masukkan email Anda"
                  class="neu-input"
                  required
                >
              </div>
            </div>

            <div class="input-group">
              <label class="input-label">Password</label>
              <div class="input-wrapper neu-inset">
                <ion-icon name="lock-closed-outline" class="input-icon"></ion-icon>
                <input 
                  type="password" 
                  [(ngModel)]="password" 
                  name="password" 
                  placeholder="Masukkan password Anda"
                  class="neu-input"
                  required
                >
              </div>
            </div>

            <div class="forgot-password">
              <a href="#" class="forgot-link">Lupa password?</a>
            </div>
          </div>

          <!-- Error Message -->
          <div *ngIf="showError" class="error-message">
            <ion-icon name="alert-circle-outline"></ion-icon>
            <span>{{ errorMessage }}</span>
          </div>

          <!-- Login Button -->
          <div class="button-section">
            <button 
              type="submit" 
              class="login-btn neu-button-raised"
              [disabled]="isLoading"
            >
              <span *ngIf="!isLoading">Masuk</span>
              <span *ngIf="isLoading" class="loading-text">
                <ion-icon name="hourglass-outline" class="loading-icon"></ion-icon>
                Memproses...
              </span>
            </button>
          </div>

          <!-- Social Login -->
          <div class="social-section">
            <div class="divider">
              <span class="divider-text">atau masuk dengan</span>
            </div>
            
            <div class="social-buttons">
              <button 
                type="button" 
                class="social-btn google-btn neu-button-subtle"
                (click)="loginWithGoogle()"
                [disabled]="isLoading"
              >
                <ion-icon name="logo-google"></ion-icon>
                <span>Login dengan Google</span>
              </button>
              
              <button 
                type="button" 
                class="social-btn google-redirect-btn neu-button-subtle"
                (click)="loginWithGoogleRedirect()"
                [disabled]="isLoading"
                style="margin-top: 8px; font-size: 14px; opacity: 0.8;"
              >
                <ion-icon name="open-outline"></ion-icon>
                <span>Login Google (Redirect)</span>
              </button>
            </div>
          </div>

          <!-- Register Link -->
          <div class="register-section">
            <p class="register-text">
              Belum punya akun? 
              <a (click)="goToRegister()" class="register-link">Daftar sekarang</a>
            </p>
            
            <!-- Debug Button (only show in development) -->
            <div class="debug-section" style="margin-top: 20px; text-align: center;">
              <button 
                type="button" 
                class="debug-btn"
                (click)="showDebugInfo()"
                style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); 
                       padding: 8px 16px; border-radius: 20px; color: rgba(255,255,255,0.7); 
                       font-size: 12px; cursor: pointer;"
              >
                ðŸ”§ Debug Google Login
              </button>
            </div>
          </div>

        </form>
      </div>
    </div>
  </div>
</ion-content>